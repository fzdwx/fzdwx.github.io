<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RISC-V ç®€ä»‹ | fzdwx</title>
    <meta name="description" content="What your say ?">
    <link rel="preload stylesheet" href="/assets/style.fa8af48d.css" as="style">
    <script type="module" src="/assets/app.dc809d8e.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/assets/chunks/framework.22f4a02e.js">
  <link rel="modulepreload" href="/assets/chunks/theme.bd054aa1.js">
  <link rel="modulepreload" href="/assets/content_posts_2022-12-10-risc-v.md.21bde675.lean.js">
  <script src="https://www.googletagmanager.com/gtag/js?id=G-DGKZ9K6GHW"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-DGKZ9K6GHW");</script>
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout"><header class="Nav" data-v-a2c55d94><div class="fixed header-bar" data-v-a2c55d94></div><div class="VPNavBar" data-v-a2c55d94 data-v-d1627d94><div class="container" data-v-d1627d94><div class="title" data-v-d1627d94><div class="VPNavBarTitle" data-v-d1627d94 data-v-2b8843f9><a class="title" href="/" data-v-2b8843f9><!--[--><!--]--><!----><!--[-->fzdwx<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-d1627d94><div class="curtain" data-v-d1627d94></div><div class="content-body" data-v-d1627d94><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-d1627d94><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><img class="nav-icon" src="https://raw.githubusercontent.com/fzdwx/blog-history/main/static/images/party_parrot.gif" data-v-d1627d94><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-d1627d94 data-v-be4ac24d><span id="main-nav-aria-label" class="visually-hidden" data-v-be4ac24d>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-be4ac24d data-v-74ef78b8 data-v-152ee444><!--[-->Home<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/tags.html?layout=issue" tabindex="0" data-v-be4ac24d data-v-74ef78b8 data-v-152ee444><!--[-->Notes<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/tags.html?layout=doc" tabindex="0" data-v-be4ac24d data-v-74ef78b8 data-v-152ee444><!--[-->Docs<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/tags.html?layout=post" tabindex="0" data-v-be4ac24d data-v-74ef78b8 data-v-152ee444><!--[-->Tags<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-d1627d94 data-v-b25b24db><label title="toggle dark mode" data-v-b25b24db data-v-0aa3b32a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-0aa3b32a data-v-657fe649><span class="check" data-v-657fe649><span class="icon" data-v-657fe649><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-0aa3b32a><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-0aa3b32a><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-d1627d94 data-v-fb85d451 data-v-9399fddb><!--[--><a class="VPSocialLink" href="https://github.com/fzdwx/fzdwx.github.io" aria-label="github" target="_blank" rel="noopener" data-v-9399fddb data-v-0fd50418><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-d1627d94 data-v-daaa59f0 data-v-0b9d9e57><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-0b9d9e57><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-0b9d9e57><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-0b9d9e57><div class="VPMenu" data-v-0b9d9e57 data-v-c066e1ae><!----><!--[--><!--[--><!----><div class="group" data-v-daaa59f0><div class="item appearance" data-v-daaa59f0><p class="label" data-v-daaa59f0>Appearance</p><div class="appearance-action" data-v-daaa59f0><label title="toggle dark mode" data-v-daaa59f0 data-v-0aa3b32a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-0aa3b32a data-v-657fe649><span class="check" data-v-657fe649><span class="icon" data-v-657fe649><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-0aa3b32a><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-0aa3b32a><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div></div></div><div class="group" data-v-daaa59f0><div class="item social-links" data-v-daaa59f0><div class="VPSocialLinks social-links-list" data-v-daaa59f0 data-v-9399fddb><!--[--><a class="VPSocialLink" href="https://github.com/fzdwx/fzdwx.github.io" aria-label="github" target="_blank" rel="noopener" data-v-9399fddb data-v-0fd50418><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger active hamburger" aria-label="mobile navigation" aria-expanded="true" aria-controls="VPNavScreen" data-v-d1627d94 data-v-65922457><span class="container" data-v-65922457><span class="top" data-v-65922457></span><span class="middle" data-v-65922457></span><span class="bottom" data-v-65922457></span></span></button></div></div></div></div></header><div class="ContentDispatch" data-v-2ea121a6><div class="main-content-center" data-v-2ea121a6 data-v-24602b4a><div class="flex  items-center  justify-center"><div class="main-content-container"><div class="main-content-solot"><!--[--><header class="post-title text-center" data-v-24602b4a><h1 data-v-24602b4a>RISC-V ç®€ä»‹</h1></header><div class="page-meta flex items-center flex-col" data-v-24602b4a><div class="dark:text-dark-text/[.86]"><div class="inline-block text-sm mr-4">ğŸ•” 2022-12-10 12:41:41</div><span></span><div class="inline-block"><span class="pl-2 border-solid border-l-2            border-l-blue-1            dark:border-l-white/40            edit-link-border"></span><a class="" href="https://github.com/fzdwx/fzdwx.github.io/blob/main/content/posts/2022-12-10-risc-v.md" target="_blank">âœ</a></div></div><div class="meta-tag-list flex flex-wrap  mt-3"><!--[--><div class="px-2  text-darkbg meta-tag py-1 bg-pink1 dark:text-dark-text dark:bg-slate-300/20 rounded-lg text-xs mr-2"><a class="" href="/tags?layout=post&amp;tag=risc-v">risc-v</a></div><div class="px-2  text-darkbg meta-tag py-1 bg-pink1 dark:text-dark-text dark:bg-slate-300/20 rounded-lg text-xs mr-2"><a class="" href="/tags?layout=post&amp;tag=os">os</a></div><div class="px-2  text-darkbg meta-tag py-1 bg-pink1 dark:text-dark-text dark:bg-slate-300/20 rounded-lg text-xs mr-2"><a class="" href="/tags?layout=post&amp;tag=asm">asm</a></div><!--]--></div></div><div style="position:relative;" class="post-content vp-doc prose dark:prose-invert _content_posts_2022-12-10-risc-v" data-v-24602b4a><div><h2 id="resource" tabindex="-1">Resource <a class="header-anchor" href="#resource" aria-label="Permalink to &quot;Resource&quot;">â€‹</a></h2><ol><li><a href="https://inst.eecs.berkeley.edu/~cs61c/sp21/resources-pdfs/riscvcard.pdf" target="_blank" rel="noreferrer">RISC-V Green Card</a></li><li><a href="https://inst.eecs.berkeley.edu/~cs61c/sp21/resources-pdfs/RISCV_Calling_Convention.pdf" target="_blank" rel="noreferrer">RISC-V Call convertion</a></li><li><a href="https://github.com/fzdwx/fzdwx.github.io/releases/download/v1.0/p.h.pdf" target="_blank" rel="noreferrer">P&amp;H(RISC-V)</a></li></ol><p>åœ¨æ±‡ç¼–è¯­è¨€ä¸­æ²¡æœ‰å˜é‡è¿™ä¸ªæ¦‚å¿µ,æ±‡ç¼–è¯­è¨€é€šå¸¸æ“ä½œçš„æ˜¯<strong>å¯„å­˜å™¨</strong>.ç®—æœ¯æŒ‡ä»¤çš„æ“ä½œæ•°å¿…é¡»å–è‡ªå¯„å­˜å™¨,å†…å»ºäºç¡¬ä»¶çš„ç‰¹æ®Šä½ç½®(CPU å†…ï¼Ÿ).</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><strong>å¯„å­˜å™¨</strong>ï¼ˆRegisterï¼‰æ˜¯<a href="https://zh.wikipedia.org/wiki/%E4%B8%AD%E5%A4%AE%E8%99%95%E7%90%86%E5%99%A8" title="ä¸­å¤®å¤„ç†å™¨" target="_blank" rel="noreferrer">ä¸­å¤®å¤„ç†å™¨</a>å†…ç”¨æ¥æš‚å­˜æŒ‡ä»¤ã€<a href="https://zh.wikipedia.org/wiki/%E6%95%B8%E6%93%9A" title="æ•°æ®" target="_blank" rel="noreferrer">æ•°æ®</a>å’Œ<a href="https://zh.wikipedia.org/wiki/%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80" title="å†…å­˜åœ°å€" target="_blank" rel="noreferrer">åœ°å€</a>çš„<a href="https://zh.wikipedia.org/wiki/%E9%9B%BB%E8%85%A6%E8%A8%98%E6%86%B6%E9%AB%94" title="ç”µè„‘å­˜å‚¨å™¨" target="_blank" rel="noreferrer">ç”µè„‘å­˜å‚¨å™¨</a>.å¯„å­˜å™¨çš„å­˜è´®å®¹é‡æœ‰é™,è¯»å†™é€Ÿåº¦éå¸¸å¿«.åœ¨<a href="https://zh.wikipedia.org/wiki/%E9%9B%BB%E8%85%A6%E6%9E%B6%E6%A7%8B" title="è®¡ç®—æœºä½“ç³»ç»“æ„" target="_blank" rel="noreferrer">è®¡ç®—æœºä½“ç³»ç»“æ„</a>é‡Œ,å¯„å­˜å™¨å­˜å‚¨åœ¨å·²çŸ¥æ—¶é—´ç‚¹æ‰€ä½œè®¡ç®—çš„ä¸­é—´ç»“æœ,é€šè¿‡å¿«é€Ÿåœ°è®¿é—®æ•°æ®æ¥åŠ é€Ÿ<a href="https://zh.wikipedia.org/wiki/%E9%9B%BB%E8%85%A6%E7%A8%8B%E5%BC%8F" title="è®¡ç®—æœºç¨‹åº" target="_blank" rel="noreferrer">è®¡ç®—æœºç¨‹åº</a>çš„æ‰§è¡Œ.</p></div><h2 id="risc-v-card" tabindex="-1">RISC-V Card <a class="header-anchor" href="#risc-v-card" aria-label="Permalink to &quot;RISC-V Card&quot;">â€‹</a></h2><h3 id="risc-v-æ“ä½œæ•°" tabindex="-1">RISC-V æ“ä½œæ•° <a class="header-anchor" href="#risc-v-æ“ä½œæ•°" aria-label="Permalink to &quot;RISC-V æ“ä½œæ•°&quot;">â€‹</a></h3><p><img src="/images/20221210211515.png" alt="123"></p><ul><li>å¦‚æœå¯„å­˜å™¨çš„å¤§å°æ˜¯ 64 ä½ åˆ™ç§°ä¸º<strong>åŒå­—</strong>,32 ä½ åˆ™æ˜¯<strong>å•å­—</strong>.</li><li>x<sub>0</sub> è¢«ç¡¬è¿æ¥åˆ° 0 <ul><li><code>add x3, x4, x0</code> =&gt; <code>x3 = x4</code> (x0 is hard-wired to value 0)</li></ul></li></ul><h2 id="æ±‡ç¼–æŒ‡ä»¤" tabindex="-1">æ±‡ç¼–æŒ‡ä»¤ <a class="header-anchor" href="#æ±‡ç¼–æŒ‡ä»¤" aria-label="Permalink to &quot;æ±‡ç¼–æŒ‡ä»¤&quot;">â€‹</a></h2><p><img src="/images/20221210211545.png" alt=""></p><p><img src="/images/3.png" alt=""></p><h2 id="å­˜å‚¨æ“ä½œæ•°" tabindex="-1">å­˜å‚¨æ“ä½œæ•° <a class="header-anchor" href="#å­˜å‚¨æ“ä½œæ•°" aria-label="Permalink to &quot;å­˜å‚¨æ“ä½œæ•°&quot;">â€‹</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>å°†æ•°æ®ä»å†…å­˜å¤åˆ¶åˆ°å¯„å­˜å™¨çš„æ•°æ®ä¼ è¾“æŒ‡ä»¤ç§°ä¸º <em>è½½å…¥æŒ‡ä»¤(<code>load</code>)</em>.åœ¨ RISC-V ä¸­æŒ‡ä»¤æ˜¯ <strong>ld</strong>,è¡¨ç¤ºå–åŒå­—.</p></div><h3 id="ä¸€ä¸ªä»æ•°ç»„ä¸­å–å€¼çš„-c-ç¨‹åº-å†™å‡ºæ±‡ç¼–ä»£ç " tabindex="-1">ä¸€ä¸ªä»æ•°ç»„ä¸­å–å€¼çš„ C ç¨‹åº,å†™å‡ºæ±‡ç¼–ä»£ç  <a class="header-anchor" href="#ä¸€ä¸ªä»æ•°ç»„ä¸­å–å€¼çš„-c-ç¨‹åº-å†™å‡ºæ±‡ç¼–ä»£ç " aria-label="Permalink to &quot;ä¸€ä¸ªä»æ•°ç»„ä¸­å–å€¼çš„ C ç¨‹åº,å†™å‡ºæ±‡ç¼–ä»£ç &quot;">â€‹</a></h3><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">g </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> h </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> A</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">8</span><span style="color:#89DDFF;">];</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>A æ˜¯ä¸€ä¸ª 100 ä¸ªåŒå­—ç»„æˆçš„æ•°ç»„,g, h åˆ†åˆ«å­˜å‚¨åœ¨ x20, x21 ä¸­,æ•°ç»„èµ·å§‹åœ°å€æˆ–<em>åŸºå€</em>ä½äº x22 ä¸­.</p><div class="language-asm line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ld x9, </span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">(x22) // x9 = A[</span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#89DDFF;">add</span><span style="color:#A6ACCD;"> x21, x20, x9</span><span style="color:#676E95;font-style:italic;">; // x21 = x20 + x9</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å­˜æ”¾åŸºå€çš„å¯„å­˜å™¨(x22)è¢«ç§°ä¸º<em>åŸºå€å¯„å­˜å™¨</em>, æ•°æ®ä¼ è¾“æŒ‡ä»¤ä¸­çš„ 8 ç§°ä¸º<em>åç§»é‡</em>.</p><p><img src="/images/20221212130603.png" alt="å®é™…çš„RISC-Vå†…å­˜åœ°å€å’Œå†…å­˜ä¸­åŒå­—çš„å†…å®¹. åŒå­—åœ°å€æ˜¯ 8 çš„å€æ•°,åŒç†å•å­—åœ°å€æ˜¯ 4 çš„å€æ•°"></p><div class="tip custom-block"><p class="custom-block-title">å¤§ç«¯ä¸å°ç«¯ç¼–å€</p><p>è®¡ç®—æœºåˆ†ä¸ºä¸¤ç§,ä¸€ç§ä½¿ç”¨æœ€å·¦è¾¹æˆ–â€œå¤§ç«¯â€å­—èŠ‚çš„åœ°å€ä½œä¸ºåŒå­—åœ°å€,å¦ä¸€ç§ä½¿ç”¨æœ€å³ç«¯æˆ–â€œå°ç«¯â€å­—èŠ‚çš„åœ°å€ä½œä¸ºåŒå­—åœ°å€.</p><p>RISC-V ä½¿ç”¨å°ç«¯ .ç”±äºä»…åœ¨ä»¥åŒå­—å½¢å¼å’Œ 8 ä¸ªå•ç‹¬å­—èŠ‚è®¿é—®ç›¸åŒæ•°æ®æ—¶,å­—èŠ‚é¡ºåºæ‰æœ‰å½±å“,å› æ­¤å¤§å¤šæƒ…å†µä¸éœ€è¦å…³ç³»â€œå¤§å°ç«¯â€.</p></div><p>æ‰€ä»¥ä¸ºäº†ä¸Šé¢çš„ä»£ç è·å¾—æ­£ç¡®çš„å­—èŠ‚åœ°å€åŠ åˆ° x22 è¿™ä¸ªå¯„å­˜å™¨çš„åç§»é‡ä¸º 64ï¼ˆ8x8ï¼‰.</p><p>ä¸è½½å…¥æŒ‡ä»¤ç›¸åçš„æŒ‡ä»¤é€šå¸¸è¢«æˆä¸º<em>å­˜å‚¨æŒ‡ä»¤(store)</em>,ä»å¯„å­˜å™¨å¤åˆ¶æ•°æ®åˆ°å†…å­˜.æŒ‡ä»¤æ˜¯<code>sd</code>,è¡¨ç¤ºå­˜å‚¨åŒå­—.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>åœ¨ä¸€äº›ä½“ç³»ç»“æ„ä¸­,å­—çš„èµ·å§‹åœ°å€å¿…é¡»æ˜¯ 4 çš„å€æ•°,åŒå­—çš„èµ·å§‹åœ°å€å¿…é¡»æ˜¯ 8 çš„å€æ•°.è¯¥è¦æ±‚æˆä¸º<em>å¯¹é½é™åˆ¶</em></p></div><p>RISC-V å’Œ Intel x86 æ²¡æœ‰å¯¹é½é™åˆ¶,ä½† MIPS æœ‰è¿™ä¸ªé™åˆ¶.</p><p><img src="/images/20221212152022.png" alt=""></p><h3 id="ä½¿ç”¨-load-å’Œ-store-ç¼–è¯‘ç”ŸæˆæŒ‡ä»¤" tabindex="-1">ä½¿ç”¨ load å’Œ store ç¼–è¯‘ç”ŸæˆæŒ‡ä»¤ <a class="header-anchor" href="#ä½¿ç”¨-load-å’Œ-store-ç¼–è¯‘ç”ŸæˆæŒ‡ä»¤" aria-label="Permalink to &quot;ä½¿ç”¨ load å’Œ store ç¼–è¯‘ç”ŸæˆæŒ‡ä»¤&quot;">â€‹</a></h3><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">A</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">12</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> h </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> A</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">8</span><span style="color:#89DDFF;">];</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>h å­˜æ”¾åœ¨ x21 ä¸­,A çš„åŸºå€å­˜æ”¾åœ¨ x22 ä¸­.</p><div class="language-asm line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ld x9, </span><span style="color:#F78C6C;">64</span><span style="color:#A6ACCD;">(x22)  // x9 = A[</span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#89DDFF;">add</span><span style="color:#A6ACCD;"> x9, x21, x9 // x9 = h + A[</span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">sd x9, </span><span style="color:#F78C6C;">96</span><span style="color:#A6ACCD;">(x22)  // A[</span><span style="color:#F78C6C;">12</span><span style="color:#A6ACCD;">] = x9</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="å°†å­—ç¬¦ä¸²å¤åˆ¶ç¨‹åºç¼–è¯‘ä¸ºæ±‡ç¼–" tabindex="-1">å°†å­—ç¬¦ä¸²å¤åˆ¶ç¨‹åºç¼–è¯‘ä¸ºæ±‡ç¼– <a class="header-anchor" href="#å°†å­—ç¬¦ä¸²å¤åˆ¶ç¨‹åºç¼–è¯‘ä¸ºæ±‡ç¼–" aria-label="Permalink to &quot;å°†å­—ç¬¦ä¸²å¤åˆ¶ç¨‹åºç¼–è¯‘ä¸ºæ±‡ç¼–&quot;">â€‹</a></h3><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">strcpy</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">char</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#C792EA;">[]</span><span style="color:#89DDFF;">,</span><span style="color:#C792EA;">char</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">y</span><span style="color:#C792EA;">[]</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#C792EA;">size_t</span><span style="color:#F07178;"> i</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">	i </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;font-style:italic;">while</span><span style="color:#89DDFF;">((</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">[</span><span style="color:#F07178;">i</span><span style="color:#89DDFF;">]</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">[</span><span style="color:#F07178;">i</span><span style="color:#89DDFF;">])</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">\0</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">		i </span><span style="color:#89DDFF;">+=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>x, y çš„åŸºå€å­˜æ”¾åœ¨ x10 å’Œ x11 ä¸­, i å­˜æ”¾åœ¨ x19 ä¸­.</p><div class="language-asm line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">strcpy</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">	addi </span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">, -</span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">  // è°ƒæ•´æ ˆæŒ‡é’ˆ,ä»¥å­˜æ”¾ä¸€ä¸ªitem(x19)</span></span>
<span class="line"><span style="color:#A6ACCD;">	sd x19, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)    // x19 å…¥æ ˆ</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">add</span><span style="color:#A6ACCD;"> x19, x0, x0  // x19 = </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> + </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#82AAFF;">L1</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">add</span><span style="color:#A6ACCD;"> x5, x19, x11 // x5 = x19 + x11 =&gt; address of y[i] </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> x5</span></span>
<span class="line"><span style="color:#A6ACCD;">	lbu x6, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">(x5)    // </span><span style="color:#82AAFF;">temp</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> x6 = y[i]</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">add</span><span style="color:#A6ACCD;"> x7, x19, x10 // x5 = x19 + x11 =&gt; address of x[i] </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> x7</span></span>
<span class="line"><span style="color:#A6ACCD;">	sd  x6, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">(x7)    // x[i] = y[i]</span></span>
<span class="line"><span style="color:#A6ACCD;">	beq x6, x0, L2   // if x6 ==</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> then go to L2</span></span>
<span class="line"><span style="color:#A6ACCD;">	addi x19, x19, </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> // i = i  + </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">	jal x0, L1       // go to L1</span></span>
<span class="line"><span style="color:#82AAFF;">L2</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> ld x19, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)    // æ¢å¤ x19 ä»¥åŠæ ˆæŒ‡é’ˆ</span></span>
<span class="line"><span style="color:#A6ACCD;">	addi </span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">8</span></span>
<span class="line"><span style="color:#A6ACCD;">	jalr x0, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">(x1)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="ä¸€æ®µå¾ªç¯ä»£ç ç¼–è¯‘ä¸ºæ±‡ç¼–" tabindex="-1">ä¸€æ®µå¾ªç¯ä»£ç ç¼–è¯‘ä¸ºæ±‡ç¼– <a class="header-anchor" href="#ä¸€æ®µå¾ªç¯ä»£ç ç¼–è¯‘ä¸ºæ±‡ç¼–" aria-label="Permalink to &quot;ä¸€æ®µå¾ªç¯ä»£ç ç¼–è¯‘ä¸ºæ±‡ç¼–&quot;">â€‹</a></h3><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> A</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">];</span></span>
<span class="line"><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> sum </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;">  3i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">++){</span></span>
<span class="line"><span style="color:#F07178;">	sum </span><span style="color:#89DDFF;">+=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">A</span><span style="color:#89DDFF;">[</span><span style="color:#F07178;">i</span><span style="color:#89DDFF;">];</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>RISC-V æ±‡ç¼–ï¼ˆ32 bit)</p><div class="language-asm line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">add</span><span style="color:#A6ACCD;"> x9, x8, x0    </span><span style="color:#676E95;font-style:italic;"> # x9 = &amp;A[0]</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">add</span><span style="color:#A6ACCD;"> x10, x0, x0   </span><span style="color:#676E95;font-style:italic;"> # sum</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">add</span><span style="color:#A6ACCD;"> x11, x0, x0   </span><span style="color:#676E95;font-style:italic;"> # i</span></span>
<span class="line"><span style="color:#A6ACCD;">	addi x13,x0, </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"> # 20</span></span>
<span class="line"><span style="color:#89DDFF;">Loop</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">	bge x11, x13, Done</span><span style="color:#676E95;font-style:italic;"> # if x11 &gt; x13 go to Down(end loop)</span></span>
<span class="line"><span style="color:#A6ACCD;">	lw x12, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">(x9)     </span><span style="color:#676E95;font-style:italic;"> # x12 = A[i]</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">add</span><span style="color:#A6ACCD;"> x10, x10, x12 </span><span style="color:#676E95;font-style:italic;"> # sum</span></span>
<span class="line"><span style="color:#A6ACCD;">	addi x9, x9, </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"> # x9 = &amp;A[i+1]</span></span>
<span class="line"><span style="color:#A6ACCD;">	addi x11, x11, </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"> # i++</span></span>
<span class="line"><span style="color:#A6ACCD;">	j </span><span style="color:#89DDFF;">loop</span></span>
<span class="line"><span style="color:#82AAFF;">Done</span><span style="color:#89DDFF;">:</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="é€»è¾‘æ“ä½œ" tabindex="-1">é€»è¾‘æ“ä½œ <a class="header-anchor" href="#é€»è¾‘æ“ä½œ" aria-label="Permalink to &quot;é€»è¾‘æ“ä½œ&quot;">â€‹</a></h2><ul><li><code>and</code> <code>andi</code><ul><li><code>and x5, x6, x9</code> =&gt; x5 = x6 &amp; x9</li><li><code>addi x5, x6, 3</code> =&gt; x5 = x6 &amp; 3</li></ul></li><li><code>sll</code> <code>ssli</code> , å·¦ç§»(æ‰©å¤§) <ul><li><code>slli x11, x23, 2</code> =&gt; x11 = x23 &lt;&lt; 2</li><li>0000 0010 =&gt; 2</li><li>0000 1000 =&gt; 8</li></ul></li><li><code>srl</code> <code>srli</code> , å³ç§»ï¼ˆç¼©å°) <ul><li><code>srli x23, x11, 2</code> = &gt; x23 = x11 &gt;&gt; 2</li><li>0000 1000 =&gt; 8</li><li>0000 0010 =&gt; 2</li></ul></li><li><code>sra</code> <code>srai</code>, ç®—æ•°å³ç§» <ul><li>1111 1111 1111 1111 1111 1111 1110 0111 = -25</li><li><code>srai x10, x10, 4</code></li><li>1111 1111 1111 1111 1111 1111 1111 1110 = -2</li></ul></li></ul><h2 id="helpful-risc-v-assmebler-features" tabindex="-1">Helpful RISC-V Assmebler Features <a class="header-anchor" href="#helpful-risc-v-assmebler-features" aria-label="Permalink to &quot;Helpful RISC-V Assmebler Features&quot;">â€‹</a></h2><ol><li>a0 - a7 æ˜¯å‚æ•°å¯„å­˜å™¨(x10 - x17,ç”¨äºå‡½æ•°è°ƒç”¨.</li><li>zero ä»£è¡¨ x0</li><li><code>mv rd, rs = addi rd, rs, 0</code></li><li><code>li rd, 13 = addi rd, x0, 13</code></li><li><code>nop = addi x0, x0</code></li><li><code>la a1 Lable</code> å°† Label çš„ åœ°å€ åŠ è½½åˆ° a1</li><li>a0 - a7(x10 - x17): 8 ä¸ªå¯„å­˜å™¨ç”¨äºå‚æ•°ä¼ é€’ä»¥åŠä¸¤ä¸ªè¿”å›å€¼(a0 - a1)</li><li>raï¼ˆx1ï¼‰: ä¸€ä¸ªè¿”å› address çš„å¯„å­˜å™¨,ç”¨äºè¿”å›åŸç‚¹ï¼ˆè°ƒç”¨çš„ä½ç½®ï¼‰</li><li>s0 - s1(x8 - x9) and s2 - s11 (s18 - x27): ä¿å­˜çš„å¯„å­˜å™¨</li></ol><h2 id="risc-v-å‡½æ•°è°ƒç”¨çš„è½¬æ¢" tabindex="-1">RISC-V å‡½æ•°è°ƒç”¨çš„è½¬æ¢ <a class="header-anchor" href="#risc-v-å‡½æ•°è°ƒç”¨çš„è½¬æ¢" aria-label="Permalink to &quot;RISC-V å‡½æ•°è°ƒç”¨çš„è½¬æ¢&quot;">â€‹</a></h2><ol><li>å¯„å­˜å™¨æ¯”å†…å­˜å¿«,æ‰€ä»¥ä½¿ç”¨å®ƒä»¬</li><li><code>jal rd, Label</code> è·³è½¬å’Œé“¾æ¥ <ol><li><code>jal x1, 100</code></li></ol></li><li><code>jalr rd, rs, imm</code> è·³è½¬å’Œé“¾æ¥å¯„å­˜å™¨ <ol><li><code>jalr x1, 100(x5)</code></li></ol></li><li><code>jal Lable</code> =&gt; <code>jal ra, Lable</code> è°ƒç”¨å‡½æ•°</li><li><code>jalr s1</code> å½“ s1 æ˜¯æ–¹æ³•æŒ‡é’ˆæ—¶,è¿™å°±æ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨</li></ol><h3 id="ä¸€æ®µå‡½æ•°è°ƒç”¨è½¬æ¢ä¸ºæ±‡ç¼–" tabindex="-1">ä¸€æ®µå‡½æ•°è°ƒç”¨è½¬æ¢ä¸ºæ±‡ç¼– <a class="header-anchor" href="#ä¸€æ®µå‡½æ•°è°ƒç”¨è½¬æ¢ä¸ºæ±‡ç¼–" aria-label="Permalink to &quot;ä¸€æ®µå‡½æ•°è°ƒç”¨è½¬æ¢ä¸ºæ±‡ç¼–&quot;">â€‹</a></h3><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">...</span></span>
<span class="line"><span style="color:#82AAFF;">sum</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sum</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">y</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">	retrun x </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> y</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-asm line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">1000</span><span style="color:#A6ACCD;"> mv a0, s0             </span><span style="color:#676E95;font-style:italic;"> # x = a</span></span>
<span class="line"><span style="color:#F78C6C;">1004</span><span style="color:#A6ACCD;"> mv a1, s1             </span><span style="color:#676E95;font-style:italic;"> # y= b</span></span>
<span class="line"><span style="color:#F78C6C;">1008</span><span style="color:#A6ACCD;"> addi ra, zero, </span><span style="color:#F78C6C;">1016</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"> # 1016 is sum function</span></span>
<span class="line"><span style="color:#F78C6C;">1012</span><span style="color:#A6ACCD;"> j                     </span><span style="color:#676E95;font-style:italic;"> # jump to sum</span></span>
<span class="line"><span style="color:#F78C6C;">1016</span><span style="color:#A6ACCD;"> ...</span></span>
<span class="line"><span style="color:#A6ACCD;">...</span></span>
<span class="line"><span style="color:#F78C6C;">2000</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sum</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">add</span><span style="color:#A6ACCD;"> a0, a0, a1</span></span>
<span class="line"><span style="color:#F78C6C;">2004</span><span style="color:#A6ACCD;"> jr ra</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>1008 ~ 1012 å¯ä»¥ä½¿ç”¨ <code>jal sum</code> æ¥æ›¿ä»£ã€</p><h3 id="è°ƒç”¨å‡½æ•°çš„åŸºæœ¬æ­¥éª¤" tabindex="-1">è°ƒç”¨å‡½æ•°çš„åŸºæœ¬æ­¥éª¤ <a class="header-anchor" href="#è°ƒç”¨å‡½æ•°çš„åŸºæœ¬æ­¥éª¤" aria-label="Permalink to &quot;è°ƒç”¨å‡½æ•°çš„åŸºæœ¬æ­¥éª¤&quot;">â€‹</a></h3><ol><li>æŠŠéœ€è¦çš„å‚æ•°æ”¾åˆ°æ–¹æ³•å¯ä»¥è®¿é—®çš„åœ°æ–¹ï¼ˆå¯„å­˜å™¨ï¼‰</li><li>è½¬ç§»æ§åˆ¶æƒç»™å‡½æ•°,ä½¿ç”¨(<code>jal</code>) <ol><li>ä¿æŒåœ°å€,å¹¶è·³è½¬åˆ°å‡½æ•°çš„åœ°å€</li></ol></li><li>è·å–å‡½æ•°æ‰§è¡Œæ‰€éœ€çš„(local)å­˜å‚¨èµ„æº</li><li>æ‰§è¡Œé¢„æœŸçš„å‡½æ•°</li><li>å°†è¿”å›å€¼æ”¾åœ¨è°ƒç”¨ä»£ç å¯ä»¥è®¿é—®çš„åœ°æ–¹,å¹¶æ¢å¤æˆ‘ä»¬ä½¿ç”¨åˆ°çš„å¯„å­˜å™¨,é‡Šæ”¾æœ¬åœ°å­˜å‚¨</li><li>å°†æ§åˆ¶å™¨è¿”å›ç»™ä¸»å¤„ç†å™¨ï¼ˆ<code>ret</code>), ä½¿ç”¨å­˜å‚¨åœ¨å¯„å­˜å™¨ä¸­çš„åœ°å€,è¿”å›åˆ°è°ƒç”¨å®ƒçš„åœ°æ–¹</li></ol><h3 id="æ–¹æ³•è°ƒç”¨ç¤ºä¾‹" tabindex="-1">æ–¹æ³•è°ƒç”¨ç¤ºä¾‹ <a class="header-anchor" href="#æ–¹æ³•è°ƒç”¨ç¤ºä¾‹" aria-label="Permalink to &quot;æ–¹æ³•è°ƒç”¨ç¤ºä¾‹&quot;">â€‹</a></h3><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">leaf</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">g</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">h</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">i</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">j</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#C792EA;">int</span><span style="color:#F07178;"> f</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">	f </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">g </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> h</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">i </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> j</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">	retrun f</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol><li>g,h,i,j in a0,a1,a2,a3</li><li>f in s0</li><li>temp is s1</li></ol><div class="language-asm line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">leaf</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	# prologue start</span></span>
<span class="line"><span style="color:#A6ACCD;">	addi </span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">, -</span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"> # è…¾å‡º 8byte æ¥å­˜æ”¾çš„2ä¸ªæ•´æ•°</span></span>
<span class="line"><span style="color:#A6ACCD;">	sw s1, </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)     </span><span style="color:#676E95;font-style:italic;"> # ä¿å­˜ s1, s0 åˆ° sp ä¸­</span></span>
<span class="line"><span style="color:#A6ACCD;">	sw s0, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	# prologue end</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">add</span><span style="color:#A6ACCD;"> s0, a0, a1   </span><span style="color:#676E95;font-style:italic;"> # f = g + h</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">add</span><span style="color:#A6ACCD;"> s1, a2, a3   </span><span style="color:#676E95;font-style:italic;"> # temp = i + j</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">sub</span><span style="color:#A6ACCD;"> a0, s0, s1   </span><span style="color:#676E95;font-style:italic;"> # a0 = ï¼ˆg + h) - (i + j)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	# epilogue</span></span>
<span class="line"><span style="color:#A6ACCD;">	lw s0, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)     </span><span style="color:#676E95;font-style:italic;"> # æ¢å¤ s1, s0</span></span>
<span class="line"><span style="color:#A6ACCD;">	lw s1, </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	addi </span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	jr ra</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="sp" tabindex="-1">sp <a class="header-anchor" href="#sp" aria-label="Permalink to &quot;sp&quot;">â€‹</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>sp æ˜¯æ ˆæŒ‡é’ˆ,ä»å†…å­˜ç©ºé—´ çš„æœ€é¡¶éƒ¨å¼€å§‹å‘ä¸‹å¢é•¿,åœ¨ RISC-V ä¸­ä½¿ç”¨ x2 è¿™ä¸ªå¯„å­˜å™¨.</p><ol><li>push æ˜¯å‡å°‘ sp çš„æŒ‡é’ˆåœ°å€</li><li>pop æ˜¯å¢åŠ </li></ol></div><p>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ç»„å­˜æ”¾åœ¨æ ˆä¸Šçš„æ•°æ®,å®ƒä»¬æ˜¯<strong>æ ˆå¸§</strong>ï¼ˆstack frame ï¼‰,æ ˆå¸§é€šå¸¸åŒ…å«ï¼š</p><ol><li>è¿”å›åœ°å€</li><li>å‚æ•°</li><li>ä½¿ç”¨çš„å±€éƒ¨å˜é‡çš„ç©ºé—´</li></ol><h2 id="åµŒå¥—å‡½æ•°è°ƒç”¨" tabindex="-1">åµŒå¥—å‡½æ•°è°ƒç”¨ <a class="header-anchor" href="#åµŒå¥—å‡½æ•°è°ƒç”¨" aria-label="Permalink to &quot;åµŒå¥—å‡½æ•°è°ƒç”¨&quot;">â€‹</a></h2><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sumSquare</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#89DDFF;">,</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">y</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">mult</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> y</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>åœ¨ ra ä¸­æœ‰ä¸€ä¸ª sumSquare æƒ³è¦è·³å›çš„å€¼,ä½†æ˜¯è¿™ä¸ªå€¼ä¼šè¢«è°ƒç”¨ mult è¦†ç›–.</p><ol><li>caller: è°ƒç”¨å‡½æ•°çš„äºº</li><li>calleï¼š è¢«è°ƒç”¨çš„å‡½æ•°</li><li>å½“è¢«è°ƒç”¨è€…ä»æ‰§è¡Œä¸­è¿”å›æ—¶,è°ƒç”¨è€…éœ€è¦çŸ¥é“å“ªäº›å¯„å­˜å™¨å¯èƒ½å‘ç”Ÿäº†å˜åŒ–,å“ªäº›å¯„å­˜å™¨è¢«ä¿è¯æ˜¯ä¸å˜çš„.</li><li>å¯„å­˜å™¨è§„å®šï¼š å³å“ªäº›å¯„å­˜å™¨åœ¨ç¨‹åºè°ƒç”¨(<code>jal</code>) åå°†è¢«å–æ¶ˆç¼“å­˜ ,å“ªäº›å¯ä»¥è¢«æ”¹å˜. <ol><li>å³æœ‰ä¸€äº›å¯„å­˜å™¨æ˜¯æ˜“å¤±çš„(temp),ä¸€äº›æ˜¯è¦ä¿å­˜çš„ï¼ˆ<strong>è°ƒç”¨è€…éœ€è¦æ¢å¤å®ƒä»¬åŸæ¥çš„å€¼</strong>ï¼‰.</li><li>è¿™ä¼˜åŒ–äº†æ¯æ¬¡è¿›å…¥æ ˆå¸§çš„å¯„å­˜å™¨çš„æ•°é‡</li></ol></li><li>åˆ†ç±»: <ol><li>è·¨å‡½æ•°è°ƒç”¨ä¿ç•™: <ol><li>sp, gp, tp</li><li>s0 - s11 (s0 is also fp)</li></ol></li><li>ä¸ä¿ç•™: <ol><li>å‚æ•°å¯„å­˜å™¨ä»¥åŠè¿”å›å¯„å­˜å™¨ï¼š a0 - a7, ra</li><li>temp å¯„å­˜å™¨: t0 - t6</li></ol></li></ol></li></ol><p>ä¸Šé¢ä»£ç çš„ RISC-V</p><p>x in a1, y in a1</p><div class="language-asm line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">sumSquare</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">	addi </span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;"> -</span><span style="color:#F78C6C;">8</span></span>
<span class="line"><span style="color:#A6ACCD;">	sw ra, </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)             // save retrun address to </span><span style="color:#89DDFF;">sp</span></span>
<span class="line"><span style="color:#A6ACCD;">	sw a1, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)             // save s1 to y</span></span>
<span class="line"><span style="color:#A6ACCD;">	mv a1, a0                // y = x =&gt; mult(x,x)</span></span>
<span class="line"><span style="color:#A6ACCD;">	jal mult                 // </span><span style="color:#89DDFF;">call</span><span style="color:#A6ACCD;"> mult</span></span>
<span class="line"><span style="color:#A6ACCD;">	lw a1, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)             // get y from </span><span style="color:#89DDFF;">sp</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">add</span><span style="color:#A6ACCD;"> a0, a0, a1           // mult() + y</span></span>
<span class="line"><span style="color:#A6ACCD;">	lw ra, </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)             // get retrun address from </span><span style="color:#89DDFF;">sp</span></span>
<span class="line"><span style="color:#A6ACCD;">	addi </span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">8</span></span>
<span class="line"><span style="color:#A6ACCD;">	jr ra</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="risc-v-å¯„å­˜å™¨åç§°" tabindex="-1">RISC-V å¯„å­˜å™¨åç§° <a class="header-anchor" href="#risc-v-å¯„å­˜å™¨åç§°" aria-label="Permalink to &quot;RISC-V å¯„å­˜å™¨åç§°&quot;">â€‹</a></h2><p><img src="/images/20221213192858.png" alt=""></p><h2 id="risc-v-æ–¹æ³•è°ƒç”¨å¥—è·¯" tabindex="-1">RISC-V æ–¹æ³•è°ƒç”¨å¥—è·¯ <a class="header-anchor" href="#risc-v-æ–¹æ³•è°ƒç”¨å¥—è·¯" aria-label="Permalink to &quot;RISC-V æ–¹æ³•è°ƒç”¨å¥—è·¯&quot;">â€‹</a></h2><div class="language-asm line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">asm</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">matmul</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"> # å‹æ ˆ,è…¾å‡ºç©ºé—´ä¿å­˜æˆ‘ä»¬è¦ä½¿ç”¨çš„å‡ ä¸ª s å¯„å­˜å™¨</span></span>
<span class="line"><span style="color:#A6ACCD;">    addi </span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;"> -</span><span style="color:#F78C6C;">36</span></span>
<span class="line"><span style="color:#A6ACCD;">    sw ra </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    sw s0 </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    sw s1 </span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    sw s2 </span><span style="color:#F78C6C;">12</span></span>
<span class="line"><span style="color:#A6ACCD;">    sw s3 </span><span style="color:#F78C6C;">16</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    sw s4 </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    sw s5 </span><span style="color:#F78C6C;">24</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    sw s6 </span><span style="color:#F78C6C;">28</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    sw s7 </span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">body</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"> # xxx xxx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">end</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"> # æ¢å¤å¯„å­˜å™¨çš„å€¼</span></span>
<span class="line"><span style="color:#A6ACCD;">    lw ra </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    lw s0 </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    lw s1 </span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    lw s2 </span><span style="color:#F78C6C;">12</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    lw s3 </span><span style="color:#F78C6C;">16</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    lw s4 </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    lw s5 </span><span style="color:#F78C6C;">24</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    lw s6 </span><span style="color:#F78C6C;">28</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    lw s7 </span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    addi </span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">sp</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">36</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">ret</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h1 id="risc-v-æŒ‡ä»¤äºŒè¿›åˆ¶çš„è¡¨ç¤º" tabindex="-1">RISC-V æŒ‡ä»¤äºŒè¿›åˆ¶çš„è¡¨ç¤º <a class="header-anchor" href="#risc-v-æŒ‡ä»¤äºŒè¿›åˆ¶çš„è¡¨ç¤º" aria-label="Permalink to &quot;RISC-V æŒ‡ä»¤äºŒè¿›åˆ¶çš„è¡¨ç¤º&quot;">â€‹</a></h1><h2 id="r-æ ¼å¼å¸ƒå±€" tabindex="-1">R æ ¼å¼å¸ƒå±€ <a class="header-anchor" href="#r-æ ¼å¼å¸ƒå±€" aria-label="Permalink to &quot;R æ ¼å¼å¸ƒå±€&quot;">â€‹</a></h2><p>ç”¨äºç®—æœ¯å’Œé€»è¾‘è¿ç®—çš„æŒ‡ä»¤</p><p><img src="/images/20221224214056.png" alt=""></p><ol><li>opcode,funct3, funct7 : å°†å‘Šè¯‰æˆ‘ä»¬æ˜¯å¦è¦æ‰§è¡ŒåŠ ,å‡,å·¦ç§»,å¼‚æˆ–ç­‰æ“ä½œ. <ol><li>R-format çš„ opcode å›ºå®šä¸º 0110011</li></ol></li><li>ä¸€ä¸ª add æ“ä½œï¼š <code>add x18 x19 x10</code> =&gt; <code>x18 = x19 + x10</code></li><li><code>0000000 01010 10011 000 10010 0110011</code></li><li><code>rs2 = x19</code>, <code>rs1 = x10</code>, <code>rd = x18</code></li></ol><h2 id="i-æ ¼å¼å¸ƒå±€" tabindex="-1">I æ ¼å¼å¸ƒå±€ <a class="header-anchor" href="#i-æ ¼å¼å¸ƒå±€" aria-label="Permalink to &quot;I æ ¼å¼å¸ƒå±€&quot;">â€‹</a></h2><p>å¤„ç†ç«‹å³æ•°,æ¯”å¦‚<code>addi rd rs1, imm</code> =&gt; <code>addi a0 a0 1</code></p><p><img src="/images/20221224220039.png" alt=""></p><ol><li>imm çš„èŒƒå›´æ˜¯ -2084 ï½ 2047</li></ol><p><img src="/images/20221224220349.png" alt="addi x15 x1 -50"></p><h2 id="risc-v-loads" tabindex="-1">RISC-V Loads <a class="header-anchor" href="#risc-v-loads" aria-label="Permalink to &quot;RISC-V Loads&quot;">â€‹</a></h2><p>load æŒ‡ä»¤ä¹Ÿæ˜¯ I ç±»å‹çš„.</p><p><img src="/images/20221224221104.png" alt="lw x14 8(x2)"></p><h2 id="s-æ ¼å¼å¸ƒå±€" tabindex="-1">S æ ¼å¼å¸ƒå±€ <a class="header-anchor" href="#s-æ ¼å¼å¸ƒå±€" aria-label="Permalink to &quot;S æ ¼å¼å¸ƒå±€&quot;">â€‹</a></h2><p><img src="/images/20221224221434.png" alt=""></p></div></div><!--]--></div></div></div></div></div><div class="my-[100px]"></div><!----></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"content_docs_ostep_2023-03-28-ostep-sync.md\":\"799750cb\",\"content_docs_ostep_2023-03-28-ostep-mutex.md\":\"01475eca\",\"content_issues_1.md\":\"003fd0e9\",\"content_docs_ostep_2023-04-15-ostep-sem.md\":\"48849d12\",\"content_posts_2022-09-29-dwm.md\":\"d6ad012d\",\"content_posts_2022-10-04-backlight.md\":\"8aa229bb\",\"content_posts_2022-10-09-mario-nes.md\":\"68a17507\",\"content_posts_2022-09-28-http-protocol.md\":\"9f834a51\",\"content_posts_2022-10-10-code-alias.md\":\"682adc10\",\"content_posts_2022-09-28-neovim-use-notes.md\":\"b9e41948\",\"content_posts_2022-10-23-about-git-detached-head.md\":\"a28d2fdd\",\"content_posts_2022-12-04-hugo-preview-obsidian.md\":\"764669a1\",\"content_posts_2022-10-15-about-github-action.md\":\"6724719d\",\"content_posts_2022-12-07-steganography.md\":\"562c58e0\",\"content_posts_2022-09-18-about-rofi.md\":\"8b038bcc\",\"content_posts_2022-10-11-about-source.md\":\"3885b0c5\",\"content_posts_2022-10-07-gfs.md\":\"2f9d0801\",\"content_posts_2022-12-10-risc-v.md\":\"21bde675\",\"content_posts_2023-01-26-hyprland.md\":\"bd1b7ff5\",\"content_posts_2023-03-22-web-font.md\":\"f9c73c22\",\"content_posts_2023-02-01-bufline.md\":\"4e17f9f5\",\"content_posts_2023-02-09-bluetooth.md\":\"9fcc5c81\",\"content_posts_2023-02-13-asd.md\":\"f7ec9c23\",\"content_posts_2023-03-05-jyyos_c_compile.md\":\"df34339b\",\"links.md\":\"1526f9fd\",\"content_posts_2023-03-27-vitepress-blog-theme.md\":\"cb4a475b\",\"content_posts_2023-04-18-go-zero-curd-logic.md\":\"d8ec3b67\",\"tags.md\":\"2a5542b2\",\"index.md\":\"b77150ac\",\"content_posts_2023-02-12-tmux-st.md\":\"8a4a4e28\"}")
function deserializeFunctions(value) {
  if (Array.isArray(value)) {
    return value.map(deserializeFunctions);
  } else if (typeof value === "object" && value !== null) {
    return Object.keys(value).reduce((acc, key) => {
      acc[key] = deserializeFunctions(value[key]);
      return acc;
    }, {});
  } else if (typeof value === "string" && value.startsWith("_vp-fn_")) {
    return new Function(`return ${value.slice(7)}`)();
  } else {
    return value;
  }
}
__VP_SITE_DATA__ = deserializeFunctions(JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"fzdwx\",\"description\":\"What your say ?\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"outline\":{\"level\":\"deep\"},\"search\":{\"provider\":\"local\"},\"icon\":\"https://raw.githubusercontent.com/fzdwx/blog-history/main/static/images/party_parrot.gif\",\"dateFormat\":\"YYYY-MM-DD HH:mm:ss\",\"editLink\":{\"text\":\"âœ\",\"pattern\":\"_vp-fn_(path2) => {\\n        return `https://github.com/fzdwx/fzdwx.github.io/blob/main/${path2}`;\\n      }\"},\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Notes\",\"link\":\"/tags?layout=issue\"},{\"text\":\"Docs\",\"link\":\"/tags?layout=doc\"},{\"text\":\"Tags\",\"link\":\"/tags?layout=post\",\"activeMatch\":\"\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/fzdwx/fzdwx.github.io\"}]},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}"))</script>
    
  </body>
</html>